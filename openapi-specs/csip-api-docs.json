{
  "openapi": "3.0.1",
  "info": {
    "title": "Challenge, Support, and Intervention Plan API",
    "description": "API for retrieving and managing Challenge, Support, and Intervention Plan (CSIP) relating to a person.\n\n## Authentication\n\nThis API uses OAuth2 with JWTs. You will need to pass the JWT in the `Authorization` header using the `Bearer` scheme.\n\n## Authorisation\n\nThe API uses roles to control access to the endpoints. The roles required for each endpoint are documented in the endpoint descriptions.\n\n## Identifying the user\n\nThe majority of the endpoints in this API require the user to be identified via their username. This is to correctly populate the change history of CSIP records e.g. who created or updated a CSIP record and for auditing purposes. The username is required when the service is called directly by a user or when another service is acting on behalf of a user. The following methods for supplying the username are supported to cater for these scenarios:\n\n1. **Token claim** - The username can be passed in via a `user_name` or `username` claim in the JWT.\n2. **Username header** - The username can be passed in via a `Username` header in the request.\n\nThe username is taken in priority order from the `user_name` or `username` claim in the JWT if present, followed by the `Username` header if no claim is found.\n\n### 4XX response codes related to username:\n\n- A 400 Bad Request response will be returned if the username cannot be found via any of the above methods.\n- A 400 Bad Request response will be returned if the username cannot be found in the user management service.\n- A 403 Forbidden response will also be returned if the user identified by the username does not have access to the caseload associated with the person.",
    "contact": {
      "name": "HMPPS Digital Studio",
      "email": "feedback@digital.justice.gov.uk"
    },
    "version": "2024-06-12.499.307d2c8"
  },
  "servers": [
    {
      "url": "https://csip-api-dev.hmpps.service.justice.gov.uk",
      "description": "Generated server url"
    }
  ],
  "security": [
    {
      "bearer-jwt": [
        "read",
        "write"
      ]
    }
  ],
  "tags": [
    {
      "name": "5. Safer Custody Screening Outcome Controller",
      "description": "Endpoints for Safer Custody Screening Outcome operations"
    },
    {
      "name": "1. CSIP Record Controller",
      "description": "Endpoints for CSIP Record operations"
    },
    {
      "name": "4. Decision And Actions Controller",
      "description": "Endpoints for Decision And Actions operations"
    },
    {
      "name": "6. Plans Controller",
      "description": "Endpoints for Plans And Identified Needs operations"
    },
    {
      "name": "6. Reviews Controller",
      "description": "Endpoints for Reviews And Attendees operations"
    },
    {
      "name": "2. Referral Controller",
      "description": "Endpoints for Referral and Contributory Factor operations"
    },
    {
      "name": "7. Reference Data Controller",
      "description": "Endpoints for Reference Data operations"
    },
    {
      "name": "3. Investigations Controller",
      "description": "Endpoints for Investigations And Interviews operations"
    }
  ],
  "paths": {
    "/reference-data/{domain}": {
      "get": {
        "tags": [
          "7. Reference Data Controller"
        ],
        "summary": "Retrieve all reference data fo a domain.",
        "description": "Get all reference data for a domain e.g. area-of-work\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "getReferenceData",
        "parameters": [
          {
            "name": "domain",
            "in": "path",
            "description": "Reference data domain.",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "area-of-work",
                "contributory-factor-type",
                "role",
                "incident-involvement",
                "incident-location",
                "incident-type",
                "interviewee-role",
                "outcome-type"
              ]
            }
          },
          {
            "name": "includeInactive",
            "in": "query",
            "description": "Include inactive reference data. Defaults to false",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "404": {
            "description": "The reference data associated with this domain was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Reference data found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReferenceData"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "7. Reference Data Controller"
        ],
        "summary": "Add a reference data code.",
        "description": "Add a reference data code. Publishes prisoner-csip.reference-data-code-created event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "addReferenceDataCode",
        "parameters": [
          {
            "name": "domain",
            "in": "path",
            "description": "Reference data domain.",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "area-of-work",
                "contributory-factor-type",
                "role",
                "incident-involvement",
                "incident-location",
                "incident-type",
                "interviewee-role",
                "outcome-type"
              ]
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateReferenceDataRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Reference data code added",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReferenceData"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The reference data associated with this domain was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/prisoners/{prisonNumber}/csip-records": {
      "get": {
        "tags": [
          "1. CSIP Record Controller"
        ],
        "summary": "Retrieve and filter all CSIP records for a prisoner.",
        "description": "Returns the CSIP records for a prisoner. Supports log number filtering.\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "getCsipRecordsByPrisonNumber",
        "parameters": [
          {
            "name": "prisonNumber",
            "in": "path",
            "description": "Prison Number of the prisoner",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "logNumber",
            "in": "query",
            "description": "Filter CSIP records that contain the search text in their Log Number. The search is case insensitive.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "Search text"
          },
          {
            "name": "createdAtStart",
            "in": "query",
            "description": "Filter CSIP records that have a created timestamp at or after the supplied time.",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "example": "2021-09-27T14:19:25"
          },
          {
            "name": "createdAtEnd",
            "in": "query",
            "description": "Filter CSIP records that have a created timestamp at or before the supplied time.",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "example": "2021-09-27T14:19:25"
          },
          {
            "name": "page",
            "in": "query",
            "description": "Zero-based page index (0..N)",
            "required": false,
            "schema": {
              "minimum": 0,
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "size",
            "in": "query",
            "description": "The size of the page to be returned",
            "required": false,
            "schema": {
              "minimum": 1,
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "sort",
            "in": "query",
            "description": "Sorting criteria in the format: property,(asc|desc). Default sort order is ascending. Multiple sort criteria are supported.",
            "required": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": [
                "createdAt,DESC"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "CSIP records found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PageCsipRecord"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "1. CSIP Record Controller"
        ],
        "summary": "Create a CSIP record for a prisoner.",
        "description": "Create the CSIP record, referral and contributory factors. This starts the CSIP process. Publishes prisoner-csip.csip-record-created and prisoner-csip.contributory-factor-created events\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI\n* ROLE_NOMIS_CSIP",
        "operationId": "createCsipRecord",
        "parameters": [
          {
            "name": "prisonNumber",
            "in": "path",
            "description": "Prison Number of the prisoner",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCsipRecordRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "CSIP record created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CsipRecord"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/referral/safer-custody-screening": {
      "post": {
        "tags": [
          "5. Safer Custody Screening Outcome Controller"
        ],
        "summary": "Add safer custody screening outcome to the referral.",
        "description": "Create the safer custody screening outcome. Publishes prisoner-csip.csip-record-updated event with saferCustodyScreeningOutcomeAffected = true\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI\n* ROLE_NOMIS_CSIP",
        "operationId": "createScreeningOutcome",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSaferCustodyScreeningOutcomeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "409": {
            "description": "Conflict. The CSIP referral already has a Safer Custody Screening Outcome created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "Safer Custody Screening Outcome added to CSIP referral",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SaferCustodyScreeningOutcome"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "5. Safer Custody Screening Outcome Controller"
        ],
        "summary": "Update the safer custody screening outcome.",
        "description": "Update the safer custody screening outcome. Publishes prisoner-csip.csip-record-updated event with saferCustodyScreeningOutcomeAffected = true\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateScreeningOutcome",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSaferCustodyScreeningOutcomeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Safer Custody Screening Outcome updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SaferCustodyScreeningOutcome"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/referral/investigation": {
      "post": {
        "tags": [
          "3. Investigations Controller"
        ],
        "summary": "Add investigation and any interviews to the referral.",
        "description": "Create the investigation and any interviews. Publishes prisoner-csip.csip-record-updated event with investigationAffected = true and prisoner-csip.interview-created event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI\n* ROLE_NOMIS_CSIP",
        "operationId": "createInvestigation",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateInvestigationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "Investigation and interviews added to CSIP referral",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Investigation"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Conflict. The CSIP referral already has an Investigation created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "3. Investigations Controller"
        ],
        "summary": "Update the investigation.",
        "description": "Update the investigation only. Cannot update interviews with this endpoint. Publishes prisoner-csip.csip-record-updated event with investigationAffected = true\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateInvestigation",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateInvestigationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Investigation updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Investigation"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/referral/investigation/interviews": {
      "post": {
        "tags": [
          "3. Investigations Controller"
        ],
        "summary": "Add an interview to the investigation.",
        "description": "Add an interview to the investigation. Publishes prisoner-csip.interview-created event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createInterview",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateInterviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "Interview added to CSIP referral",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Interview"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/referral/decision-and-actions": {
      "post": {
        "tags": [
          "4. Decision And Actions Controller"
        ],
        "summary": "Add decision and actions to the referral.",
        "description": "Create the decision and actions. Publishes prisoner-csip.csip-record-updated event with decisionAndActionsAffected = true\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI\n* ROLE_NOMIS_CSIP",
        "operationId": "createDecision",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateDecisionAndActionsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "409": {
            "description": "The CSIP referral associated with this identifier already has a decision and actions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "Decision and actions added to CSIP referral",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DecisionAndActions"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "4. Decision And Actions Controller"
        ],
        "summary": "Update the decision and actions.",
        "description": "Update the decision and actions. Publishes prisoner-csip.csip-record-updated event with decisionAndActionsAffected = true\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateDecision",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateDecisionAndActionsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Decision and Actions updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DecisionAndActions"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/referral/contributory-factors": {
      "post": {
        "tags": [
          "2. Referral Controller"
        ],
        "summary": "Add a contributory factor to the referral.",
        "description": "Add a contributory factor to the referral. Publishes prisoner-csip.contributory-factor-created event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createContributoryFactor",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateContributoryFactorRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "New contributory factor added to CSIP referral",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContributoryFactor"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/plan": {
      "post": {
        "tags": [
          "6. Plans Controller"
        ],
        "summary": "Create the CSIP plan and identified needs.",
        "description": "Create the CSIP plan and identified needs. Publishes prisoner-csip.csip-record-updated event with planAffected = true and prisoner-csip.identified-need-created event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createPlan",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePlanRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "CSIP plan and identified needs created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Plan"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "6. Plans Controller"
        ],
        "summary": "Update the CSIP plan.",
        "description": "Update the plan only. Cannot update identified needs with this endpoint. Publishes prisoner-csip.csip-record-updated event with planAffected = true\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updatePlan",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePlanRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The CSIP plan associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "CSIP Plan updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Plan"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/plan/reviews": {
      "post": {
        "tags": [
          "6. Reviews Controller"
        ],
        "summary": "Add a review of the plan and any attendees.",
        "description": "Create a review of the plan and any attendees. Publishes prisoner-csip.review-created and prisoner-csip.attendee-created events\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createReview",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateReviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Reviews and attendees added to CSIP plan",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Review"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP plan associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/plan/identified-needs": {
      "post": {
        "tags": [
          "6. Plans Controller"
        ],
        "summary": "Add an identified need to the plan.",
        "description": "Add an identified need to the plan. Publishes prisoner-csip.identified-need-created event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createIdentifiedNeed",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateIdentifiedNeedRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The CSIP plan associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "Identified need added to CSIP plan",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdentifiedNeed"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/plan/reviews/{reviewUuid}/attendees": {
      "post": {
        "tags": [
          "6. Reviews Controller"
        ],
        "summary": "Add an attendee to a review of the plan.",
        "description": "Add an attendee to a review of the plan. Publishes prisoner-csip.attendee-created event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createAttendee",
        "parameters": [
          {
            "name": "reviewUuid",
            "in": "path",
            "description": "Review unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAttendeeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Attendee added to review",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Attendee"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The review associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/reference-data/{domain}/{code}": {
      "patch": {
        "tags": [
          "7. Reference Data Controller"
        ],
        "summary": "Update a reference data codes properties.",
        "description": "Update a reference data codes properties. Publishes prisoner-csip.reference-data-code-updated event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateReferenceDataCode",
        "parameters": [
          {
            "name": "domain",
            "in": "path",
            "description": "Reference data domain.",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "area-of-work",
                "contributory-factor-type",
                "role",
                "incident-involvement",
                "incident-location",
                "incident-type",
                "interviewee-role",
                "outcome-type"
              ]
            }
          },
          {
            "name": "code",
            "in": "path",
            "description": "Short code of the reference data to be updated",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateReferenceDataRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The reference data associated with this domain and code was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Reference data code updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReferenceData"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/reference-data/{domain}/{code}/reactivate": {
      "patch": {
        "tags": [
          "7. Reference Data Controller"
        ],
        "summary": "Reactivate a reference data code.",
        "description": "Reactivate a reference data code. Publishes prisoner-csip.reference-data-code-reactivated event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "reactivateReferenceDataCode",
        "parameters": [
          {
            "name": "domain",
            "in": "path",
            "description": "Reference data domain.",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "area-of-work",
                "contributory-factor-type",
                "role",
                "incident-involvement",
                "incident-location",
                "incident-type",
                "interviewee-role",
                "outcome-type"
              ]
            }
          },
          {
            "name": "code",
            "in": "path",
            "description": "Short code of the reference data to be reactivated",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Reference data code reactivated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReferenceData"
                }
              }
            }
          },
          "404": {
            "description": "The reference data associated with this domain and code was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/reference-data/{domain}/{code}/deactivate": {
      "patch": {
        "tags": [
          "7. Reference Data Controller"
        ],
        "summary": "Deactivate a reference data code.",
        "description": "Deactivate a reference data code. Publishes prisoner-csip.reference-data-code-deactivated event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "deactivateReferenceDataCode",
        "parameters": [
          {
            "name": "domain",
            "in": "path",
            "description": "Reference data domain.",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "area-of-work",
                "contributory-factor-type",
                "role",
                "incident-involvement",
                "incident-location",
                "incident-type",
                "interviewee-role",
                "outcome-type"
              ]
            }
          },
          {
            "name": "code",
            "in": "path",
            "description": "Short code of the reference data to be deactivated",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "404": {
            "description": "The reference data associated with this domain and code was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Reference data code deactivated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReferenceData"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/referral": {
      "patch": {
        "tags": [
          "2. Referral Controller"
        ],
        "summary": "Update the CSIP referral",
        "description": "Update the CSIP referral only. Cannot update contributory factors with this endpoint. Publishes prisoner-csip.csip-record-created event with referralAffected = true\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateReferral",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateReferralRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "CSIP referral updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Referral"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/log-number": {
      "patch": {
        "tags": [
          "1. CSIP Record Controller"
        ],
        "summary": "Update the log number for a CSIP record.",
        "description": "Update the log number for a CSIP record. Publishes prisoner-csip.csip-record-updated event with recordAffected = true\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateCsipRecord",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCsipRecordRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP record associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "CSIP record updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CsipRecord"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/referral/investigation/interviews/{interviewUuid}": {
      "delete": {
        "tags": [
          "3. Investigations Controller"
        ],
        "summary": "Remove an interview from the investigation.",
        "description": "Remove an interview from the investigation. Publishes prisoner-csip.interview-deleted event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "deleteInterview",
        "parameters": [
          {
            "name": "interviewUuid",
            "in": "path",
            "description": "Interview unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "404": {
            "description": "The interview associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "204": {
            "description": "Interview deleted"
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "3. Investigations Controller"
        ],
        "summary": "Update an interview on the investigation.",
        "description": "Update an interview on the investigation. Publishes prisoner-csip.interview-updated event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateInterview",
        "parameters": [
          {
            "name": "interviewUuid",
            "in": "path",
            "description": "Interview unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateInterviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The interview associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Interview updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Interview"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/referral/contributory-factors/{contributoryFactorUuid}": {
      "delete": {
        "tags": [
          "2. Referral Controller"
        ],
        "summary": "Remove a contributory factor on the referral.",
        "description": "Remove a contributory factor from the referral. Publishes prisoner-csip.contributory-factor-deleted event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "deleteContributoryFactor",
        "parameters": [
          {
            "name": "contributoryFactorUuid",
            "in": "path",
            "description": "Contributory Factor unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Contributory factor deleted"
          },
          "404": {
            "description": "The contributory factor associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "2. Referral Controller"
        ],
        "summary": "Update a contributory factor on the referral.",
        "description": "Update a contributory factor on the referral. Publishes prisoner-csip.contributory-factor-updated event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateContributoryFactor",
        "parameters": [
          {
            "name": "contributoryFactorUuid",
            "in": "path",
            "description": "Contributory Factor unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateContributoryFactorRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The contributory factor associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Contributory factor updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContributoryFactor"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/plan/reviews/{reviewUuid}": {
      "patch": {
        "tags": [
          "6. Reviews Controller"
        ],
        "summary": "Update a review of the plan.",
        "description": "Update a review of the plan only. Cannot update attendees with this endpoint. Publishes prisoner-csip.review-updated event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateReview",
        "parameters": [
          {
            "name": "reviewUuid",
            "in": "path",
            "description": "Review unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateReviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Review updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Review"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The review associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/plan/reviews/attendees/{attendeeUuid}": {
      "delete": {
        "tags": [
          "6. Reviews Controller"
        ],
        "summary": "Remove an attendee from a review of the plan.",
        "description": "Remove an attendee from a review of the plan. Publishes prisoner-csip.attendee-deleted event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "deleteAttendee",
        "parameters": [
          {
            "name": "attendeeUuid",
            "in": "path",
            "description": "Attendee unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Attendee deleted"
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The attendee associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "6. Reviews Controller"
        ],
        "summary": "Update an attendee on a review of the plan.",
        "description": "Update an attendee on a review of the plan. Publishes prisoner-csip.attendee-updated event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateAttendee",
        "parameters": [
          {
            "name": "attendeeUuid",
            "in": "path",
            "description": "Attendee unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAttendeeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Attendee updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Attendee"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The attendee associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/plan/identified-needs/{identifiedNeedUuid}": {
      "delete": {
        "tags": [
          "6. Plans Controller"
        ],
        "summary": "Remove an identified need from the plan.",
        "description": "Remove an identified need from the plan. Publishes prisoner-csip.identified-need-deleted event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "deleteIdentifiedNeed",
        "parameters": [
          {
            "name": "identifiedNeedUuid",
            "in": "path",
            "description": "Identified Need unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Identified need deleted"
          },
          "404": {
            "description": "The identified need associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "6. Plans Controller"
        ],
        "summary": "Update an identified need on the plan.",
        "description": "Update an identified need on the plan. Publishes prisoner-csip.identified-need-updated event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateIdentifiedNeed",
        "parameters": [
          {
            "name": "identifiedNeedUuid",
            "in": "path",
            "description": "Identified Need unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateIdentifiedNeedRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The identified need associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Identified Need updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdentifiedNeed"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/prisons/{prisonCode}/csip-records": {
      "get": {
        "tags": [
          "1. CSIP Record Controller"
        ],
        "summary": "Retrieve and filter all CSIP records for prisoners resident in the prison.",
        "description": "Returns the CSIP records for prisoners resident in the prison. Supports log number filtering.\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "getCsipRecordsByPrisonCode",
        "parameters": [
          {
            "name": "prisonCode",
            "in": "path",
            "description": "Prison Code of the prison",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "logNumber",
            "in": "query",
            "description": "Filter CSIP records that contain the search text in their Log Number. The search is case insensitive.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "Search text"
          },
          {
            "name": "createdAtStart",
            "in": "query",
            "description": "Filter CSIP records that have a created timestamp at or after the supplied time.",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "example": "2021-09-27T14:19:25"
          },
          {
            "name": "createdAtEnd",
            "in": "query",
            "description": "Filter CSIP records that have a created timestamp at or before the supplied time.",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "example": "2021-09-27T14:19:25"
          },
          {
            "name": "page",
            "in": "query",
            "description": "Zero-based page index (0..N)",
            "required": false,
            "schema": {
              "minimum": 0,
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "size",
            "in": "query",
            "description": "The size of the page to be returned",
            "required": false,
            "schema": {
              "minimum": 1,
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "sort",
            "in": "query",
            "description": "Sorting criteria in the format: property,(asc|desc). Default sort order is ascending. Multiple sort criteria are supported.",
            "required": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": [
                "createdAt,DESC"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "CSIP records found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PageCsipRecord"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}": {
      "get": {
        "tags": [
          "1. CSIP Record Controller"
        ],
        "summary": "Get a CSIP record by its unique identifier",
        "description": "Returns the CSIP record with the matching identifier.\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "retrieveCsipRecord",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "CSIP record found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CsipRecord"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP record associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "1. CSIP Record Controller"
        ],
        "summary": "Delete a complete CSIP record.",
        "description": "Delete the whole of a CSIP record, including its referral and plan. Publishes prisoner-csip.csip-record-deleted event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "deleteCsipRecord",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "204": {
            "description": "CSIP record deleted"
          },
          "404": {
            "description": "The CSIP record associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "CreateReferenceDataRequest": {
        "required": [
          "code"
        ],
        "type": "object",
        "properties": {
          "code": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The short code for a reference data"
          },
          "description": {
            "maxLength": 40,
            "minLength": 0,
            "type": "string",
            "description": "The description for the reference data code"
          }
        },
        "description": "The request body to create a new code to a reference data table"
      },
      "ErrorResponse": {
        "required": [
          "status"
        ],
        "type": "object",
        "properties": {
          "status": {
            "type": "integer",
            "format": "int32"
          },
          "errorCode": {
            "type": "string"
          },
          "userMessage": {
            "type": "string"
          },
          "developerMessage": {
            "type": "string"
          },
          "moreInfo": {
            "type": "string"
          }
        }
      },
      "ReferenceData": {
        "required": [
          "code",
          "createdAt",
          "createdBy"
        ],
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "The short code of a reference data"
          },
          "description": {
            "type": "string",
            "description": "The description of the reference data code"
          },
          "listSequence": {
            "type": "integer",
            "description": "The sequence number of the code. Used for ordering codes correctly in lists and drop downs. ",
            "format": "int32",
            "example": 3
          },
          "createdAt": {
            "type": "string",
            "description": "The date and time the code was created",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string",
            "description": "The username of the user who created the code",
            "example": "USER1234"
          },
          "modifiedAt": {
            "type": "string",
            "description": "The date and time the code was last modified",
            "format": "date-time"
          },
          "modifiedBy": {
            "type": "string",
            "description": "The username of the user who last modified the code",
            "example": "USER1234"
          },
          "deactivatedAt": {
            "type": "string",
            "description": "The date and time the code was deactivated",
            "format": "date-time"
          },
          "deactivatedBy": {
            "type": "string",
            "description": "The username of the user who deactivated the code",
            "example": "USER1234"
          }
        },
        "description": "A reference data code to categorise various aspects related to a CSIP record"
      },
      "CreateContributoryFactorRequest": {
        "required": [
          "factorTypeCode"
        ],
        "type": "object",
        "properties": {
          "factorTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of contributory factor to the incident or motivation for CSIP referral."
          },
          "comment": {
            "type": "string",
            "description": "Additional information about the contributory factor to the incident or motivation for CSIP referral."
          }
        },
        "description": "The request body to create a contributory factor to the incident that motivated the CSIP referral"
      },
      "CreateCsipRecordRequest": {
        "required": [
          "logNumber",
          "referral"
        ],
        "type": "object",
        "properties": {
          "logNumber": {
            "maxLength": 10,
            "minLength": 0,
            "type": "string",
            "description": "User entered identifier for the CSIP record. Defaults to the prison code."
          },
          "referral": {
            "$ref": "#/components/schemas/CreateReferralRequest"
          }
        },
        "description": "The request body for creating a new CSIP Record for a person"
      },
      "CreateReferralRequest": {
        "required": [
          "contributoryFactors",
          "descriptionOfConcern",
          "incidentDate",
          "incidentInvolvementCode",
          "incidentLocationCode",
          "incidentTypeCode",
          "knownReasons",
          "refererAreaCode",
          "referredBy"
        ],
        "type": "object",
        "properties": {
          "incidentDate": {
            "type": "string",
            "description": "The date the incident that motivated the CSIP referral occurred",
            "format": "date",
            "example": "2021-09-27"
          },
          "incidentTime": {
            "pattern": "HH:mm:SS",
            "type": "string",
            "description": "The time the incident that motivated the CSIP referral occurred",
            "example": "14:19:25"
          },
          "incidentTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of incident that motivated the CSIP referral."
          },
          "incidentLocationCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The location of incident that motivated the CSIP referral."
          },
          "referredBy": {
            "maxLength": 240,
            "minLength": 1,
            "type": "string",
            "description": "The person reporting the incident or creating the CSIP referral."
          },
          "refererAreaCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The area of work of the person reporting the incident or creating the CSIP referral."
          },
          "referralSummary": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Summary of the CSIP referral."
          },
          "isProactiveReferral": {
            "type": "boolean",
            "description": "Was this referral proactive or preventative."
          },
          "isStaffAssaulted": {
            "type": "boolean",
            "description": "Were any members of staff assaulted in the incident."
          },
          "assaultedStaffName": {
            "maxLength": 1000,
            "minLength": 0,
            "type": "string",
            "description": "Name or names of assaulted members of staff if any."
          },
          "incidentInvolvementCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of involvement the person had in the incident"
          },
          "descriptionOfConcern": {
            "type": "string",
            "description": "The reasons why there is cause for concern."
          },
          "knownReasons": {
            "type": "string",
            "description": "The reasons already known about the causes of the incident or motivation for CSIP referral."
          },
          "otherInformation": {
            "type": "string",
            "description": "Any other information about the incident or reasons for CSIP referral."
          },
          "isSaferCustodyTeamInformed": {
            "type": "boolean",
            "description": "Records whether the safer custody team been informed."
          },
          "isReferralComplete": {
            "type": "boolean",
            "description": "Is the referral complete."
          },
          "contributoryFactors": {
            "maxItems": 2147483647,
            "minItems": 1,
            "type": "array",
            "description": "Contributory factors to the incident that motivated the referral.",
            "items": {
              "$ref": "#/components/schemas/CreateContributoryFactorRequest"
            }
          }
        },
        "description": "The request body for creating a CSIP referral"
      },
      "Attendee": {
        "required": [
          "attendeeUuid",
          "createdAt",
          "createdBy",
          "createdByDisplayName"
        ],
        "type": "object",
        "properties": {
          "attendeeUuid": {
            "type": "string",
            "description": "The unique identifier assigned to the Attendee",
            "format": "uuid",
            "example": "8cdadcf3-b003-4116-9956-c99bd8df6a00"
          },
          "name": {
            "type": "string",
            "description": "Name of review attendee/contributor."
          },
          "role": {
            "type": "string",
            "description": "Role of review attendee/contributor."
          },
          "isAttended": {
            "type": "boolean",
            "description": "If the person attended the review."
          },
          "contribution": {
            "type": "string",
            "description": "Description of attendee contribution."
          },
          "createdAt": {
            "type": "string",
            "description": "The date and time the Attendee was created",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string",
            "description": "The username of the user who created the Attendee",
            "example": "USER1234"
          },
          "createdByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who created the Attendee",
            "example": "Firstname Lastname"
          },
          "lastModifiedAt": {
            "type": "string",
            "description": "The date and time the Attendee was last modified",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string",
            "description": "The username of the user who last modified the Attendee",
            "example": "USER1234"
          },
          "lastModifiedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who last modified the Attendee",
            "example": "Firstname Lastname"
          }
        },
        "description": "An Attendee or Contributor to a Review of a CSIP Plan"
      },
      "ContributoryFactor": {
        "required": [
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "factorType",
          "factorUuid"
        ],
        "type": "object",
        "properties": {
          "factorUuid": {
            "type": "string",
            "description": "The unique identifier assigned to the Contributory Factor",
            "format": "uuid",
            "example": "8cdadcf3-b003-4116-9956-c99bd8df6a00"
          },
          "factorType": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "comment": {
            "type": "string",
            "description": "Additional information about the contributory factor to the incident or motivation for CSIP referral."
          },
          "createdAt": {
            "type": "string",
            "description": "The date and time the Contributory Factor was created",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string",
            "description": "The username of the user who created the Contributory Factor",
            "example": "USER1234"
          },
          "createdByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who created the Contributory Factor",
            "example": "Firstname Lastname"
          },
          "lastModifiedAt": {
            "type": "string",
            "description": "The date and time the Contributory Factor was last modified",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string",
            "description": "The username of the user who last modified the Contributory Factor",
            "example": "USER1234"
          },
          "lastModifiedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who last modified the Contributory Factor",
            "example": "Firstname Lastname"
          }
        },
        "description": "The contributory factor to the incident that motivated the CSIP referral"
      },
      "CsipRecord": {
        "required": [
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "prisonNumber",
          "recordUuid",
          "referral"
        ],
        "type": "object",
        "properties": {
          "recordUuid": {
            "type": "string",
            "description": "The unique identifier assigned to the CSIP Record",
            "format": "uuid",
            "example": "8cdadcf3-b003-4116-9956-c99bd8df6a00"
          },
          "prisonNumber": {
            "type": "string",
            "description": "The prison number of the person the CSIP record is for."
          },
          "prisonCodeWhenRecorded": {
            "type": "string",
            "description": "The prison code where the person was resident at the time the CSIP record was created."
          },
          "logNumber": {
            "type": "string",
            "description": "User entered identifier for the CSIP record. Defaults to the prison code."
          },
          "createdAt": {
            "type": "string",
            "description": "The date and time the CSIP Record was created",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string",
            "description": "The username of the user who created the CSIP Record",
            "example": "USER1234"
          },
          "createdByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who created the CSIP Record",
            "example": "Firstname Lastname"
          },
          "lastModifiedAt": {
            "type": "string",
            "description": "The date and time the CSIP Record was last modified",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string",
            "description": "The username of the user who last modified the CSIP Record",
            "example": "USER1234"
          },
          "lastModifiedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who last modified the CSIP Record",
            "example": "Firstname Lastname"
          },
          "referral": {
            "$ref": "#/components/schemas/Referral"
          },
          "plan": {
            "$ref": "#/components/schemas/Plan"
          }
        },
        "description": "A CSIP Record associated with a person"
      },
      "DecisionAndActions": {
        "required": [
          "isActionCsraOrRsraReview",
          "isActionNonAssociationsUpdated",
          "isActionObservationBook",
          "isActionOpenCsipAlert",
          "isActionServiceReferral",
          "isActionSimReferral",
          "isActionUnitOrCellMove",
          "outcome"
        ],
        "type": "object",
        "properties": {
          "conclusion": {
            "type": "string",
            "description": "The conclusion of the referral and reasons for the outcome decision."
          },
          "outcome": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "outcomeSignedOffByRole": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "outcomeRecordedBy": {
            "type": "string",
            "description": "The username of the user who recorded the outcome decision."
          },
          "outcomeRecordedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who recorded the outcome decision."
          },
          "outcomeDate": {
            "type": "string",
            "description": "The date the outcome decision was made.",
            "format": "date",
            "example": "2021-09-27"
          },
          "nextSteps": {
            "type": "string",
            "description": "The next steps that should be taken following the outcome decision."
          },
          "isActionOpenCsipAlert": {
            "type": "boolean",
            "description": "If a recommended action is to open a CSIP alert."
          },
          "isActionNonAssociationsUpdated": {
            "type": "boolean",
            "description": "If a recommended action is to update the non associations for the person."
          },
          "isActionObservationBook": {
            "type": "boolean",
            "description": "If a recommended action is to add the person to the observation book."
          },
          "isActionUnitOrCellMove": {
            "type": "boolean",
            "description": "If a recommended action is to move the person."
          },
          "isActionCsraOrRsraReview": {
            "type": "boolean",
            "description": "If a recommended action is to perform a CSRA/RSRA review."
          },
          "isActionServiceReferral": {
            "type": "boolean",
            "description": "If a recommended action is to refer the person to another service."
          },
          "isActionSimReferral": {
            "type": "boolean",
            "description": "If a recommended action is to refer the person to SIM."
          },
          "actionOther": {
            "type": "string",
            "description": "Any other actions that are recommended to be considered."
          }
        },
        "description": "The Decision and Actions for the CSIP referral"
      },
      "IdentifiedNeed": {
        "required": [
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "createdDate",
          "identifiedNeed",
          "identifiedNeedUuid",
          "intervention",
          "needIdentifiedBy",
          "targetDate"
        ],
        "type": "object",
        "properties": {
          "identifiedNeedUuid": {
            "type": "string",
            "description": "The unique identifier assigned to the Contributory Factor",
            "format": "uuid",
            "example": "8cdadcf3-b003-4116-9956-c99bd8df6a00"
          },
          "identifiedNeed": {
            "type": "string",
            "description": "Details of the need identified in the CSIP plan."
          },
          "needIdentifiedBy": {
            "type": "string",
            "description": "The name of the person who identified the need."
          },
          "createdDate": {
            "type": "string",
            "description": "The date the need was identified.",
            "format": "date",
            "example": "2021-09-27"
          },
          "targetDate": {
            "type": "string",
            "description": "The target date the need should be progressed or resolved.",
            "format": "date",
            "example": "2021-09-27"
          },
          "closedDate": {
            "type": "string",
            "description": "The date the identified need was resolved or closed.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervention": {
            "type": "string",
            "description": "The planned intervention for the identified need."
          },
          "progression": {
            "type": "string",
            "description": "How the plan to address the identified need is progressing."
          },
          "createdAt": {
            "type": "string",
            "description": "The date and time the Identified Need was created",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string",
            "description": "The username of the user who created the Identified Need",
            "example": "USER1234"
          },
          "createdByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who created the Identified Need",
            "example": "Firstname Lastname"
          },
          "lastModifiedAt": {
            "type": "string",
            "description": "The date and time the Identified Need was last modified",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string",
            "description": "The username of the user who last modified the Identified Need",
            "example": "USER1234"
          },
          "lastModifiedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who last modified the Identified Need",
            "example": "Firstname Lastname"
          }
        },
        "description": "A need identified in the CSIP Plan"
      },
      "Interview": {
        "required": [
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "interviewDate",
          "interviewUuid",
          "interviewee",
          "intervieweeRole"
        ],
        "type": "object",
        "properties": {
          "interviewUuid": {
            "type": "string",
            "description": "The unique identifier assigned to the Interview",
            "format": "uuid",
            "example": "8cdadcf3-b003-4116-9956-c99bd8df6a00"
          },
          "interviewee": {
            "type": "string",
            "description": "Name of the person being interviewed."
          },
          "interviewDate": {
            "type": "string",
            "description": "The date the interview took place.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervieweeRole": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "interviewText": {
            "type": "string",
            "description": "Information provided in interview."
          },
          "createdAt": {
            "type": "string",
            "description": "The date and time the Interview was created",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string",
            "description": "The username of the user who created the Interview",
            "example": "USER1234"
          },
          "createdByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who created the Interview",
            "example": "Firstname Lastname"
          },
          "lastModifiedAt": {
            "type": "string",
            "description": "The date and time the Interview was last modified",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string",
            "description": "The username of the user who last modified the Interview",
            "example": "USER1234"
          },
          "lastModifiedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who last modified the Interview",
            "example": "Firstname Lastname"
          }
        },
        "description": "An interview in relation to the investigation on the incident that motivated the CSIP referral"
      },
      "Investigation": {
        "required": [
          "interviews"
        ],
        "type": "object",
        "properties": {
          "staffInvolved": {
            "type": "string",
            "description": "The names of the staff involved in the investigation."
          },
          "evidenceSecured": {
            "type": "string",
            "description": "Any evidence that was secured as part of the investigation."
          },
          "occurrenceReason": {
            "type": "string",
            "description": "The reasons why the incident occurred."
          },
          "personsUsualBehaviour": {
            "type": "string",
            "description": "The normal behaviour of the person in prison."
          },
          "personsTrigger": {
            "type": "string",
            "description": "What triggers the person in prison has that could have motivated the incident."
          },
          "protectiveFactors": {
            "type": "string",
            "description": "Any protective factors to reduce the person's risk factors and prevent triggers for instance of violence"
          },
          "interviews": {
            "type": "array",
            "description": "The interviews in relation to the Investigation",
            "items": {
              "$ref": "#/components/schemas/Interview"
            }
          }
        },
        "description": "The investigation on the incident that motivated the CSIP referral"
      },
      "Plan": {
        "required": [
          "caseManager",
          "firstCaseReviewDate",
          "identifiedNeeds",
          "reasonForPlan",
          "reviews"
        ],
        "type": "object",
        "properties": {
          "caseManager": {
            "type": "string",
            "description": "The case manager assigned to the CSIP plan."
          },
          "reasonForPlan": {
            "type": "string",
            "description": "The reasons motivating the creation of a CSIP plan."
          },
          "firstCaseReviewDate": {
            "type": "string",
            "description": "The first date the CSIP plan should be reviewed.",
            "format": "date",
            "example": "2021-09-27"
          },
          "identifiedNeeds": {
            "type": "array",
            "description": "The needs identified in the CSIP plan.",
            "items": {
              "$ref": "#/components/schemas/IdentifiedNeed"
            }
          },
          "reviews": {
            "type": "array",
            "description": "Regular reviews of the CSIP Plan",
            "items": {
              "$ref": "#/components/schemas/Review"
            }
          }
        },
        "description": "The CSIP Plan of a CSIP record"
      },
      "Referral": {
        "required": [
          "contributoryFactors",
          "descriptionOfConcern",
          "incidentDate",
          "incidentInvolvement",
          "incidentLocation",
          "incidentType",
          "knownReasons",
          "refererArea",
          "referredBy"
        ],
        "type": "object",
        "properties": {
          "incidentDate": {
            "type": "string",
            "description": "The date the incident that motivated the CSIP referral occurred",
            "format": "date",
            "example": "2021-09-27"
          },
          "incidentTime": {
            "pattern": "HH:mm:SS",
            "type": "string",
            "description": "The time the incident that motivated the CSIP referral occurred",
            "example": "14:19:25"
          },
          "incidentType": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "incidentLocation": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "referredBy": {
            "type": "string",
            "description": "The person reporting the incident or creating the CSIP referral."
          },
          "refererArea": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "referralSummary": {
            "type": "string",
            "description": "Summary of the CSIP referral."
          },
          "isProactiveReferral": {
            "type": "boolean",
            "description": "Was this referral proactive or preventative."
          },
          "isStaffAssaulted": {
            "type": "boolean",
            "description": "Were any members of staff assaulted in the incident."
          },
          "assaultedStaffName": {
            "type": "string",
            "description": "Name or names of assaulted members of staff if any."
          },
          "incidentInvolvement": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "descriptionOfConcern": {
            "type": "string",
            "description": "The reasons why there is cause for concern."
          },
          "knownReasons": {
            "type": "string",
            "description": "The reasons already known about the causes of the incident or motivation for CSIP referral."
          },
          "otherInformation": {
            "type": "string",
            "description": "Any other information about the incident or reasons for CSIP referral."
          },
          "isSaferCustodyTeamInformed": {
            "type": "boolean",
            "description": "Records whether the safer custody team been informed."
          },
          "isReferralComplete": {
            "type": "boolean",
            "description": "Is the referral complete."
          },
          "contributoryFactors": {
            "type": "array",
            "description": "Contributory factors to the incident that motivated the referral.",
            "items": {
              "$ref": "#/components/schemas/ContributoryFactor"
            }
          },
          "investigation": {
            "$ref": "#/components/schemas/Investigation"
          },
          "saferCustodyScreeningOutcome": {
            "$ref": "#/components/schemas/SaferCustodyScreeningOutcome"
          },
          "decisionAndActions": {
            "$ref": "#/components/schemas/DecisionAndActions"
          }
        },
        "description": "The referral of a CSIP record"
      },
      "Review": {
        "required": [
          "attendees",
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "recordedBy",
          "recordedByDisplayName",
          "reviewSequence",
          "reviewUuid"
        ],
        "type": "object",
        "properties": {
          "reviewUuid": {
            "type": "string",
            "description": "The unique identifier assigned to the Review",
            "format": "uuid",
            "example": "8cdadcf3-b003-4116-9956-c99bd8df6a00"
          },
          "reviewSequence": {
            "type": "integer",
            "description": "The sequence number of the Review. Used for ordering reviews correctly in lists and/or drop downs. ",
            "format": "int32",
            "example": 3
          },
          "reviewDate": {
            "type": "string",
            "description": "The date of the review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "recordedBy": {
            "type": "string",
            "description": "The username of the person who recorded the review."
          },
          "recordedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the person who recorded the review."
          },
          "nextReviewDate": {
            "type": "string",
            "description": "The date of the next review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "isActionResponsiblePeopleInformed": {
            "type": "boolean",
            "description": "If an action following the review was to inform people responsible for the person in prison."
          },
          "isActionCsipUpdated": {
            "type": "boolean",
            "description": "If an action following the review was to update the CSIP plan."
          },
          "isActionRemainOnCsip": {
            "type": "boolean",
            "description": "If the outcome decision following the review was the person should remain on the CSIP plan."
          },
          "isActionCaseNote": {
            "type": "boolean",
            "description": "If an action following the review was to add a CSIP case note."
          },
          "isActionCloseCsip": {
            "type": "boolean",
            "description": "If the outcome decision following the review was closing the CSIP plan."
          },
          "csipClosedDate": {
            "type": "string",
            "description": "The date the CSIP plan was closed following a review outcome decision to close it.",
            "format": "date",
            "example": "2021-09-27"
          },
          "summary": {
            "type": "string",
            "description": "Additional information about the review."
          },
          "createdAt": {
            "type": "string",
            "description": "The date and time the Review was created",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string",
            "description": "The username of the user who created the Review",
            "example": "USER1234"
          },
          "createdByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who created the Review",
            "example": "Firstname Lastname"
          },
          "lastModifiedAt": {
            "type": "string",
            "description": "The date and time the Review was last modified",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string",
            "description": "The username of the user who last modified the Review",
            "example": "USER1234"
          },
          "lastModifiedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who last modified the Review",
            "example": "Firstname Lastname"
          },
          "attendees": {
            "type": "array",
            "description": "The attendees/contributors to the review.",
            "items": {
              "$ref": "#/components/schemas/Attendee"
            }
          }
        },
        "description": "A regular review of a CSIP Plan"
      },
      "SaferCustodyScreeningOutcome": {
        "required": [
          "date",
          "outcome",
          "reasonForDecision",
          "recordedBy",
          "recordedByDisplayName"
        ],
        "type": "object",
        "properties": {
          "outcome": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "recordedBy": {
            "type": "string",
            "description": "The username of the user who recorded the safer custody screening outcome."
          },
          "recordedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who recorded the safer custody screening outcome."
          },
          "date": {
            "type": "string",
            "description": "The date of the safer custody screening outcome.",
            "format": "date",
            "example": "2021-09-27"
          },
          "reasonForDecision": {
            "type": "string",
            "description": "The reasons for the safer custody screening outcome decision."
          }
        },
        "description": "The Safer Custody Screening Outcome to the CSIP referral"
      },
      "CreateSaferCustodyScreeningOutcomeRequest": {
        "required": [
          "date",
          "outcomeTypeCode",
          "reasonForDecision"
        ],
        "type": "object",
        "properties": {
          "outcomeTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of outcome of the safer custody screening."
          },
          "date": {
            "type": "string",
            "description": "The date of the safer custody screening outcome.",
            "format": "date",
            "example": "2021-09-27"
          },
          "reasonForDecision": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons for the safer custody screening outcome decision."
          }
        },
        "description": "The request body to create the Safer Custody Screening Outcome to the CSIP referral"
      },
      "CreateInterviewRequest": {
        "required": [
          "interviewDate",
          "interviewee",
          "intervieweeRoleCode"
        ],
        "type": "object",
        "properties": {
          "interviewee": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "Name of the person being interviewed."
          },
          "interviewDate": {
            "type": "string",
            "description": "The date the interview took place.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervieweeRoleCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "What role the interviewee played in the incident or referral."
          },
          "interviewText": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Information provided in interview."
          }
        },
        "description": "The request body to create an interview"
      },
      "CreateInvestigationRequest": {
        "type": "object",
        "properties": {
          "staffInvolved": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The names of the staff involved in the investigation."
          },
          "evidenceSecured": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any evidence that was secured as part of the investigation."
          },
          "occurrenceReason": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons why the incident occurred."
          },
          "personsUsualBehaviour": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The normal behaviour of the person in prison."
          },
          "personsTrigger": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "What triggers the person in prison has that could have motivated the incident."
          },
          "protectiveFactors": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any protective factors to reduce the person's risk factors and prevent triggers for instance of violence"
          },
          "interviews": {
            "type": "array",
            "description": "The interviews in relation to the investigation",
            "items": {
              "$ref": "#/components/schemas/CreateInterviewRequest"
            }
          }
        },
        "description": "The request body to create an investigation on the incident that motivated the CSIP referral."
      },
      "CreateDecisionAndActionsRequest": {
        "required": [
          "isActionCsraOrRsraReview",
          "isActionNonAssociationsUpdated",
          "isActionObservationBook",
          "isActionOpenCsipAlert",
          "isActionServiceReferral",
          "isActionSimReferral",
          "isActionUnitOrCellMove",
          "outcomeTypeCode"
        ],
        "type": "object",
        "properties": {
          "conclusion": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The conclusion of the referral and reasons for the outcome decision."
          },
          "outcomeTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The outcome decision for the referral."
          },
          "outcomeSignedOffByRoleCode": {
            "maxLength": 12,
            "minLength": 0,
            "type": "string",
            "description": "The role of the person making the outcome decision."
          },
          "outcomeRecordedBy": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "The username of the user who recorded the outcome decision."
          },
          "outcomeRecordedByDisplayName": {
            "maxLength": 255,
            "minLength": 0,
            "type": "string",
            "description": "The displayable name of the user who recorded the outcome decision."
          },
          "outcomeDate": {
            "type": "string",
            "description": "The date the outcome decision was made.",
            "format": "date",
            "example": "2021-09-27"
          },
          "nextSteps": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The next steps that should be taken following the outcome decision."
          },
          "isActionOpenCsipAlert": {
            "type": "boolean",
            "description": "If a recommended action is to open a CSIP alert."
          },
          "isActionNonAssociationsUpdated": {
            "type": "boolean",
            "description": "If a recommended action is to update the non associations for the person."
          },
          "isActionObservationBook": {
            "type": "boolean",
            "description": "If a recommended action is to add the person to the observation book."
          },
          "isActionUnitOrCellMove": {
            "type": "boolean",
            "description": "If a recommended action is to move the person."
          },
          "isActionCsraOrRsraReview": {
            "type": "boolean",
            "description": "If a recommended action is to perform a CSRA/RSRA review."
          },
          "isActionServiceReferral": {
            "type": "boolean",
            "description": "If a recommended action is to refer the person to another service."
          },
          "isActionSimReferral": {
            "type": "boolean",
            "description": "If a recommended action is to refer the person to SIM."
          },
          "actionOther": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any other actions that are recommended to be considered."
          }
        },
        "description": "The request body to create a Decision and Actions for a CSIP referral"
      },
      "CreateIdentifiedNeedRequest": {
        "required": [
          "createdDate",
          "identifiedNeed",
          "intervention",
          "needIdentifiedBy",
          "targetDate"
        ],
        "type": "object",
        "properties": {
          "identifiedNeed": {
            "maxLength": 1000,
            "minLength": 0,
            "type": "string",
            "description": "Details of the need identified in the CSIP plan."
          },
          "needIdentifiedBy": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "The name of the person who identified the need."
          },
          "createdDate": {
            "type": "string",
            "description": "The date the need was identified.",
            "format": "date",
            "example": "2021-09-27"
          },
          "targetDate": {
            "type": "string",
            "description": "The target date the need should be progressed or resolved.",
            "format": "date",
            "example": "2021-09-27"
          },
          "closedDate": {
            "type": "string",
            "description": "The date the identified need was resolved or closed.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervention": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The planned intervention for the identified need."
          },
          "progression": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "How the plan to address the identified need is progressing."
          }
        },
        "description": "The request body to create an Identified Need in a CSIP Plan"
      },
      "CreatePlanRequest": {
        "required": [
          "caseManager",
          "firstCaseReviewDate",
          "identifiedNeeds",
          "reasonForPlan"
        ],
        "type": "object",
        "properties": {
          "caseManager": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "The case manager assigned to the CSIP plan."
          },
          "reasonForPlan": {
            "maxLength": 240,
            "minLength": 0,
            "type": "string",
            "description": "The reasons motivating the creation of a CSIP plan."
          },
          "firstCaseReviewDate": {
            "type": "string",
            "description": "The first date the CSIP plan should be reviewed.",
            "format": "date",
            "example": "2021-09-27"
          },
          "identifiedNeeds": {
            "maxItems": 2147483647,
            "minItems": 1,
            "type": "array",
            "description": "The needs identified in the CSIP plan.",
            "items": {
              "$ref": "#/components/schemas/CreateIdentifiedNeedRequest"
            }
          }
        },
        "description": "The request for creating a CSIP Plan for a CSIP record"
      },
      "CreateAttendeeRequest": {
        "type": "object",
        "properties": {
          "name": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "Name of review attendee/contributor."
          },
          "role": {
            "maxLength": 50,
            "minLength": 0,
            "type": "string",
            "description": "Role of review attendee/contributor."
          },
          "isAttended": {
            "type": "boolean",
            "description": "If the person attended the review."
          },
          "contribution": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Description of attendee contribution."
          }
        },
        "description": "The request body to create a Attendee/Contributor to the review of a CSIP Plan"
      },
      "CreateReviewRequest": {
        "required": [
          "recordedBy",
          "recordedByDisplayName"
        ],
        "type": "object",
        "properties": {
          "reviewDate": {
            "type": "string",
            "description": "The date of the review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "recordedBy": {
            "maxLength": 32,
            "minLength": 0,
            "type": "string",
            "description": "The username of the person who recorded the review."
          },
          "recordedByDisplayName": {
            "maxLength": 255,
            "minLength": 0,
            "type": "string",
            "description": "The displayable name of the person who recorded the review."
          },
          "nextReviewDate": {
            "type": "string",
            "description": "The date of the next review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "isActionResponsiblePeopleInformed": {
            "type": "boolean",
            "description": "If an action following the review was to inform people responsible for the person in prison."
          },
          "isActionCsipUpdated": {
            "type": "boolean",
            "description": "If an action following the review was to update the CSIP plan."
          },
          "isActionRemainOnCsip": {
            "type": "boolean",
            "description": "If the outcome decision following the review was the person should remain on the CSIP plan."
          },
          "isActionCaseNote": {
            "type": "boolean",
            "description": "If an action following the review was to add a CSIP case note."
          },
          "isActionCloseCsip": {
            "type": "boolean",
            "description": "If the outcome decision following the review was closing the CSIP plan."
          },
          "csipClosedDate": {
            "type": "string",
            "description": "The date the CSIP plan was closed following a review outcome decision to close it.",
            "format": "date",
            "example": "2021-09-27"
          },
          "summary": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Additional information about the review."
          },
          "attendees": {
            "type": "array",
            "description": "The attendees/contributors to the review.",
            "items": {
              "$ref": "#/components/schemas/CreateAttendeeRequest"
            }
          }
        },
        "description": "The request body to create a Review for a CSIP Plan"
      },
      "UpdateReferenceDataRequest": {
        "type": "object",
        "properties": {
          "description": {
            "maxLength": 40,
            "minLength": 0,
            "type": "string",
            "description": "The description for the reference data code"
          }
        },
        "description": "The request body to update the description of a code in a reference data table"
      },
      "UpdateReferralRequest": {
        "required": [
          "descriptionOfConcern",
          "incidentDate",
          "incidentInvolvementCode",
          "incidentLocationCode",
          "incidentTypeCode",
          "knownReasons",
          "refererAreaCode",
          "referredBy"
        ],
        "type": "object",
        "properties": {
          "incidentDate": {
            "type": "string",
            "description": "The date the incident that motivated the CSIP referral occurred",
            "format": "date",
            "example": "2021-09-27"
          },
          "incidentTime": {
            "pattern": "HH:mm:SS",
            "type": "string",
            "description": "The time the incident that motivated the CSIP referral occurred",
            "example": "14:19:25"
          },
          "incidentTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of incident that motivated the CSIP referral."
          },
          "incidentLocationCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The location of incident that motivated the CSIP referral."
          },
          "referredBy": {
            "maxLength": 240,
            "minLength": 1,
            "type": "string",
            "description": "The person reporting the incident or creating the CSIP referral."
          },
          "refererAreaCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The area of work of the person reporting the incident or creating the CSIP referral."
          },
          "referralSummary": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Summary of the CSIP referral."
          },
          "isProactiveReferral": {
            "type": "boolean",
            "description": "Was this referral proactive or preventative."
          },
          "isStaffAssaulted": {
            "type": "boolean",
            "description": "Were any members of staff assaulted in the incident."
          },
          "assaultedStaffName": {
            "maxLength": 1000,
            "minLength": 0,
            "type": "string",
            "description": "Name or names of assaulted members of staff if any."
          },
          "incidentInvolvementCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of involvement the person had in the incident"
          },
          "descriptionOfConcern": {
            "type": "string",
            "description": "The reasons why there is cause for concern."
          },
          "knownReasons": {
            "type": "string",
            "description": "The reasons already known about the causes of the incident or motivation for CSIP referral."
          },
          "otherInformation": {
            "type": "string",
            "description": "Any other information about the incident or reasons for CSIP referral."
          },
          "isSaferCustodyTeamInformed": {
            "type": "boolean",
            "description": "Records whether the safer custody team been informed."
          },
          "isReferralComplete": {
            "type": "boolean",
            "description": "Is the referral complete."
          }
        },
        "description": "The request body for updating a CSIP referral"
      },
      "UpdateSaferCustodyScreeningOutcomeRequest": {
        "required": [
          "date",
          "outcomeTypeCode",
          "reasonForDecision"
        ],
        "type": "object",
        "properties": {
          "outcomeTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of outcome of the safer custody screening."
          },
          "date": {
            "type": "string",
            "description": "The date of the safer custody screening outcome.",
            "format": "date",
            "example": "2021-09-27"
          },
          "reasonForDecision": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons for the safer custody screening outcome decision."
          }
        },
        "description": "The request body to update the Safer Custody Screening Outcome to the CSIP referral"
      },
      "UpdateInvestigationRequest": {
        "type": "object",
        "properties": {
          "staffInvolved": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The names of the staff involved in the investigation."
          },
          "evidenceSecured": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any evidence that was secured as part of the investigation."
          },
          "occurrenceReason": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons why the incident occurred."
          },
          "personsUsualBehaviour": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The normal behaviour of the person in prison."
          },
          "personsTrigger": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "What triggers the person in prison has that could have motivated the incident."
          },
          "protectiveFactors": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any protective factors to reduce the person's risk factors and prevent triggers for instance of violence"
          }
        },
        "description": "The request body to update an investigation on the incident that motivated the CSIP referral."
      },
      "UpdateDecisionAndActionsRequest": {
        "required": [
          "outcomeTypeCode"
        ],
        "type": "object",
        "properties": {
          "conclusion": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The conclusion of the referral and reasons for the outcome decision."
          },
          "outcomeTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The outcome decision for the referral."
          },
          "outcomeSignedOffByRoleCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The role of the person making the outcome decision."
          },
          "outcomeRecordedBy": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "The username of the user who recorded the outcome decision."
          },
          "outcomeRecordedByDisplayName": {
            "maxLength": 255,
            "minLength": 0,
            "type": "string",
            "description": "The displayable name of the user who recorded the outcome decision."
          },
          "outcomeDate": {
            "type": "string",
            "description": "The date the outcome decision was made.",
            "format": "date",
            "example": "2021-09-27"
          },
          "nextSteps": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The next steps that should be taken following the outcome decision."
          },
          "isActionOpenCsipAlert": {
            "type": "boolean",
            "description": "If a recommended action is to open a CSIP alert."
          },
          "isActionNonAssociationsUpdated": {
            "type": "boolean",
            "description": "If a recommended action is to update the non associations for the person."
          },
          "isActionObservationBook": {
            "type": "boolean",
            "description": "If a recommended action is to add the person to the observation book."
          },
          "isActionUnitOrCellMove": {
            "type": "boolean",
            "description": "If a recommended action is to move the person."
          },
          "isActionCsraOrRsraReview": {
            "type": "boolean",
            "description": "If a recommended action is to perform a CSRA/RSRA review."
          },
          "isActionServiceReferral": {
            "type": "boolean",
            "description": "If a recommended action is to refer the person to another service."
          },
          "isActionSimReferral": {
            "type": "boolean",
            "description": "If a recommended action is to refer the person to SIM."
          },
          "actionOther": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any other actions that are recommended to be considered."
          }
        },
        "description": "The request body to update a Decision and Actions for a CSIP referral"
      },
      "UpdatePlanRequest": {
        "required": [
          "caseManager",
          "firstCaseReviewDate",
          "reasonForPlan"
        ],
        "type": "object",
        "properties": {
          "caseManager": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "The case manager assigned to the CSIP plan."
          },
          "reasonForPlan": {
            "maxLength": 240,
            "minLength": 0,
            "type": "string",
            "description": "The reasons motivating the creation of a CSIP plan."
          },
          "firstCaseReviewDate": {
            "type": "string",
            "description": "The first date the CSIP plan should be reviewed.",
            "format": "date",
            "example": "2021-09-27"
          }
        },
        "description": "The request for updating a CSIP Plan for a CSIP record"
      },
      "UpdateCsipRecordRequest": {
        "required": [
          "logNumber"
        ],
        "type": "object",
        "properties": {
          "logNumber": {
            "maxLength": 10,
            "minLength": 0,
            "type": "string",
            "description": "User entered identifier for the CSIP record. Defaults to the prison code."
          }
        },
        "description": "The request body for updating a CSIP Record"
      },
      "UpdateInterviewRequest": {
        "required": [
          "interviewDate",
          "interviewee",
          "intervieweeRoleCode"
        ],
        "type": "object",
        "properties": {
          "interviewee": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "Name of the person being interviewed."
          },
          "interviewDate": {
            "type": "string",
            "description": "The date the interview took place.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervieweeRoleCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "What role the interviewee played in the incident or referral."
          },
          "interviewText": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Information provided in interview."
          }
        },
        "description": "The request body to update an interview"
      },
      "UpdateContributoryFactorRequest": {
        "required": [
          "factorTypeCode"
        ],
        "type": "object",
        "properties": {
          "factorTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of contributory factor to the incident or motivation for CSIP referral."
          },
          "comment": {
            "type": "string",
            "description": "Additional information about the contributory factor to the incident or motivation for CSIP referral."
          }
        },
        "description": "The request body to update a contributory factor to the incident that motivated the CSIP referral"
      },
      "UpdateReviewRequest": {
        "required": [
          "recordedBy",
          "recordedByDisplayName"
        ],
        "type": "object",
        "properties": {
          "reviewDate": {
            "type": "string",
            "description": "The date of the review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "recordedBy": {
            "maxLength": 32,
            "minLength": 0,
            "type": "string",
            "description": "The username of the person who recorded the review."
          },
          "recordedByDisplayName": {
            "maxLength": 255,
            "minLength": 0,
            "type": "string",
            "description": "The displayable name of the person who recorded the review."
          },
          "nextReviewDate": {
            "type": "string",
            "description": "The date of the next review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "isActionResponsiblePeopleInformed": {
            "type": "boolean",
            "description": "If an action following the review was to inform people responsible for the person in prison."
          },
          "isActionCsipUpdated": {
            "type": "boolean",
            "description": "If an action following the review was to update the CSIP plan."
          },
          "isActionRemainOnCsip": {
            "type": "boolean",
            "description": "If the outcome decision following the review was the person should remain on the CSIP plan."
          },
          "isActionCaseNote": {
            "type": "boolean",
            "description": "If an action following the review was to add a CSIP case note."
          },
          "isActionCloseCsip": {
            "type": "boolean",
            "description": "If the outcome decision following the review was closing the CSIP plan."
          },
          "csipClosedDate": {
            "type": "string",
            "description": "The date the CSIP plan was closed following a review outcome decision to close it.",
            "format": "date",
            "example": "2021-09-27"
          },
          "summary": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Additional information about the review."
          }
        },
        "description": "The request body to update a Review for a CSIP Plan"
      },
      "UpdateAttendeeRequest": {
        "type": "object",
        "properties": {
          "name": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "Name of review attendee/contributor."
          },
          "role": {
            "maxLength": 50,
            "minLength": 0,
            "type": "string",
            "description": "Role of review attendee/contributor."
          },
          "isAttended": {
            "type": "boolean",
            "description": "If the person attended the review."
          },
          "contribution": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Description of attendee contribution."
          }
        },
        "description": "The request body to update a Attendee/Contributor to the review of a CSIP Plan"
      },
      "UpdateIdentifiedNeedRequest": {
        "required": [
          "createdDate",
          "identifiedNeed",
          "intervention",
          "needIdentifiedBy",
          "targetDate"
        ],
        "type": "object",
        "properties": {
          "identifiedNeed": {
            "maxLength": 1000,
            "minLength": 0,
            "type": "string",
            "description": "Details of the need identified in the CSIP plan."
          },
          "needIdentifiedBy": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "The name of the person who identified the need."
          },
          "createdDate": {
            "type": "string",
            "description": "The date the need was identified.",
            "format": "date",
            "example": "2021-09-27"
          },
          "targetDate": {
            "type": "string",
            "description": "The target date the need should be progressed or resolved.",
            "format": "date",
            "example": "2021-09-27"
          },
          "closedDate": {
            "type": "string",
            "description": "The date the identified need was resolved or closed.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervention": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The planned intervention for the identified need."
          },
          "progression": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "How the plan to address the identified need is progressing."
          }
        },
        "description": "The request body to update an Identified Need in a CSIP Plan"
      },
      "PageCsipRecord": {
        "type": "object",
        "properties": {
          "totalPages": {
            "type": "integer",
            "format": "int32"
          },
          "totalElements": {
            "type": "integer",
            "format": "int64"
          },
          "first": {
            "type": "boolean"
          },
          "last": {
            "type": "boolean"
          },
          "size": {
            "type": "integer",
            "format": "int32"
          },
          "content": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CsipRecord"
            }
          },
          "number": {
            "type": "integer",
            "format": "int32"
          },
          "sort": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SortObject"
            }
          },
          "numberOfElements": {
            "type": "integer",
            "format": "int32"
          },
          "pageable": {
            "$ref": "#/components/schemas/PageableObject"
          },
          "empty": {
            "type": "boolean"
          }
        }
      },
      "PageableObject": {
        "type": "object",
        "properties": {
          "offset": {
            "type": "integer",
            "format": "int64"
          },
          "sort": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SortObject"
            }
          },
          "pageSize": {
            "type": "integer",
            "format": "int32"
          },
          "pageNumber": {
            "type": "integer",
            "format": "int32"
          },
          "paged": {
            "type": "boolean"
          },
          "unpaged": {
            "type": "boolean"
          }
        }
      },
      "SortObject": {
        "type": "object",
        "properties": {
          "direction": {
            "type": "string"
          },
          "nullHandling": {
            "type": "string"
          },
          "ascending": {
            "type": "boolean"
          },
          "property": {
            "type": "string"
          },
          "ignoreCase": {
            "type": "boolean"
          }
        }
      }
    },
    "securitySchemes": {
      "bearer-jwt": {
        "type": "http",
        "name": "Authorization",
        "in": "header",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}
