{
  "openapi" : "3.1.0",
  "info" : {
    "title" : "HMPPS External Movements Api",
    "contact" : {
      "name" : "HMPPS Digital Studio",
      "email" : "feedback@digital.justice.gov.uk"
    },
    "version" : "2025-10-10.155.8e1d865"
  },
  "servers" : [ {
    "url" : "https://external-movements-api-dev.hmpps.service.justice.gov.uk",
    "description" : "Development"
  }, {
    "url" : "https://external-movements-api-preprod.hmpps.service.justice.gov.uk",
    "description" : "Pre-Production"
  }, {
    "url" : "https://external-movements-api.hmpps.service.justice.gov.uk",
    "description" : "Production"
  }, {
    "url" : "http://localhost:8080",
    "description" : "Local"
  } ],
  "security" : [ {
    "bearer-jwt" : [ "read", "write" ]
  } ],
  "tags" : [ ],
  "paths" : {
    "/sync/temporary-absence-movement/{personIdentifier}" : {
      "put" : {
        "tags" : [ "sync-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__SYNC__RW",
        "operationId" : "syncTemporaryAbsenceMovement",
        "parameters" : [ {
          "name" : "personIdentifier",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/TapMovementRequest"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/SyncResponse"
                }
              }
            }
          }
        }
      }
    },
    "/sync/temporary-absence-application/{personIdentifier}" : {
      "put" : {
        "tags" : [ "sync-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__SYNC__RW",
        "operationId" : "syncTemporaryAbsenceApplication",
        "parameters" : [ {
          "name" : "personIdentifier",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/TapApplicationRequest"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/SyncResponse"
                }
              }
            }
          }
        }
      }
    },
    "/sync/scheduled-temporary-absence/{parentId}" : {
      "put" : {
        "tags" : [ "sync-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__SYNC__RW",
        "operationId" : "syncScheduledTemporaryAbsence",
        "parameters" : [ {
          "name" : "parentId",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ScheduledTemporaryAbsenceRequest"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/SyncResponse"
                }
              }
            }
          }
        }
      }
    },
    "/temporary-absence-authorisations/{personIdentifier}" : {
      "post" : {
        "tags" : [ "tap-authorisation-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "createTapAuthorisation",
        "parameters" : [ {
          "name" : "personIdentifier",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/CreateTapAuthorisationRequest"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "201" : {
            "description" : "Created",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ReferenceId"
                }
              }
            }
          }
        }
      }
    },
    "/temporary-absence-occurrences/{id}" : {
      "get" : {
        "tags" : [ "tap-occurrence-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "getTapOccurrence",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/TapOccurrence"
                }
              }
            }
          }
        }
      }
    },
    "/temporary-absence-authorisations/{id}" : {
      "get" : {
        "tags" : [ "tap-authorisation-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "getTapAuthorisation",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/TapAuthorisation"
                }
              }
            }
          }
        }
      }
    },
    "/search/temporary-absence-occurrences" : {
      "get" : {
        "tags" : [ "search-tap-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "findTapOccurrences",
        "parameters" : [ {
          "name" : "request",
          "in" : "query",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/TapOccurrenceSearchRequest"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/TapOccurrenceSearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/search/temporary-absence-authorisations" : {
      "get" : {
        "tags" : [ "search-tap-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "findTapAuthorisations",
        "parameters" : [ {
          "name" : "request",
          "in" : "query",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/TapAuthorisationSearchRequest"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/TapAuthorisationSearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/search/locations/{typeCode}" : {
      "get" : {
        "tags" : [ "location-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "findLocations",
        "parameters" : [ {
          "name" : "typeCode",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "enum" : [ "CORP", "OFF", "AGY", "OTHER" ]
          }
        }, {
          "name" : "request",
          "in" : "query",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/LocationSearchRequest"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/LocationSearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/reference-data/{domain}" : {
      "get" : {
        "tags" : [ "reference-data-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "getDomain",
        "parameters" : [ {
          "name" : "domain",
          "in" : "path",
          "description" : "The reference data domain required. This is case insensitive.",
          "required" : true,
          "schema" : {
            "type" : "string",
            "enum" : [ "absence-reason", "absence-reason-category", "absence-sub-type", "absence-type", "accompanied-by", "location-type", "tap-authorisation-status", "tap-occurrence-status", "transport" ]
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ReferenceDataResponse"
                }
              }
            }
          }
        }
      }
    },
    "/prisons/{prisonIdentifier}/external-movements/overview" : {
      "get" : {
        "tags" : [ "prison-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "getPrisonerOverview",
        "parameters" : [ {
          "name" : "prisonIdentifier",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/PrisonExternalMovementOverview"
                }
              }
            }
          }
        }
      }
    },
    "/locations/{typeCode}/{id}" : {
      "get" : {
        "tags" : [ "location-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "findLocationById",
        "parameters" : [ {
          "name" : "typeCode",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "enum" : [ "CORP", "OFF", "AGY", "OTHER" ]
          }
        }, {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Location"
                }
              }
            }
          }
        }
      }
    },
    "/absence-categorisation/{domain}" : {
      "get" : {
        "tags" : [ "absence-categorisation-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "getAbsenceCategorisationDomain",
        "parameters" : [ {
          "name" : "domain",
          "in" : "path",
          "description" : "The reference data domain required. This is case insensitive.",
          "required" : true,
          "schema" : {
            "type" : "string",
            "enum" : [ "absence-reason", "absence-reason-category", "absence-sub-type", "absence-type" ]
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/AbsenceCategorisations"
                }
              }
            }
          }
        }
      }
    },
    "/absence-categorisation/{domain}/{code}" : {
      "get" : {
        "tags" : [ "absence-categorisation-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "getAbsenceCategorisationOptions",
        "parameters" : [ {
          "name" : "domain",
          "in" : "path",
          "description" : "The reference data domain required. This is case insensitive.",
          "required" : true,
          "schema" : {
            "type" : "string",
            "enum" : [ "absence-reason", "absence-reason-category", "absence-sub-type", "absence-type" ]
          }
        }, {
          "name" : "code",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/AbsenceCategorisations"
                }
              }
            }
          }
        }
      }
    }
  },
  "components" : {
    "schemas" : {
      "Address" : {
        "type" : "object",
        "properties" : {
          "premise" : {
            "type" : "string"
          },
          "street" : {
            "type" : "string"
          },
          "area" : {
            "type" : "string"
          },
          "city" : {
            "type" : "string"
          },
          "county" : {
            "type" : "string"
          },
          "country" : {
            "type" : "string"
          },
          "postcode" : {
            "type" : "string"
          }
        }
      },
      "NomisAudit" : {
        "type" : "object",
        "properties" : {
          "createDatetime" : {
            "type" : "string",
            "format" : "date-time"
          },
          "createUsername" : {
            "type" : "string"
          },
          "modifyUserId" : {
            "type" : "string"
          },
          "modifyDatetime" : {
            "type" : "string",
            "format" : "date-time"
          },
          "auditTimestamp" : {
            "type" : "string",
            "format" : "date-time"
          },
          "auditUserId" : {
            "type" : "string"
          }
        },
        "required" : [ "createDatetime", "createUsername" ]
      },
      "TapLocation" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string"
          },
          "typeCode" : {
            "type" : "string"
          },
          "description" : {
            "type" : "string"
          },
          "address" : {
            "$ref" : "#/components/schemas/Address"
          }
        }
      },
      "TapMovementRequest" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "occurrenceId" : {
            "type" : "string",
            "format" : "uuid"
          },
          "legacyId" : {
            "type" : "integer",
            "format" : "int64"
          },
          "movementDateTime" : {
            "type" : "string",
            "format" : "date-time"
          },
          "movementReason" : {
            "type" : "string"
          },
          "direction" : {
            "type" : "string",
            "enum" : [ "IN", "OUT" ]
          },
          "escort" : {
            "type" : "string"
          },
          "escortText" : {
            "type" : "string"
          },
          "prisonCode" : {
            "type" : "string"
          },
          "commentText" : {
            "type" : "string"
          },
          "location" : {
            "$ref" : "#/components/schemas/TapLocation"
          },
          "audit" : {
            "$ref" : "#/components/schemas/NomisAudit"
          }
        },
        "required" : [ "audit", "direction", "legacyId", "location", "movementDateTime", "movementReason" ]
      },
      "SyncResponse" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          }
        },
        "required" : [ "id" ]
      },
      "TapApplicationRequest" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "movementApplicationId" : {
            "type" : "integer",
            "format" : "int64"
          },
          "eventSubType" : {
            "type" : "string"
          },
          "applicationDate" : {
            "type" : "string",
            "format" : "date"
          },
          "applicationStatus" : {
            "type" : "string"
          },
          "comment" : {
            "type" : "string"
          },
          "prisonId" : {
            "type" : "string"
          },
          "contactPersonName" : {
            "type" : "string"
          },
          "applicationType" : {
            "type" : "string"
          },
          "temporaryAbsenceType" : {
            "type" : "string"
          },
          "temporaryAbsenceSubType" : {
            "type" : "string"
          },
          "fromDate" : {
            "type" : "string",
            "format" : "date"
          },
          "toDate" : {
            "type" : "string",
            "format" : "date"
          },
          "audit" : {
            "$ref" : "#/components/schemas/NomisAudit"
          }
        },
        "required" : [ "applicationDate", "applicationStatus", "applicationType", "audit", "eventSubType", "fromDate", "movementApplicationId", "toDate" ]
      },
      "ScheduledTemporaryAbsenceRequest" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "eventId" : {
            "type" : "integer",
            "format" : "int64"
          },
          "eventStatus" : {
            "type" : "string"
          },
          "startTime" : {
            "type" : "string",
            "format" : "date-time"
          },
          "returnTime" : {
            "type" : "string",
            "format" : "date-time"
          },
          "toAddressOwnerClass" : {
            "type" : "string"
          },
          "toAddressId" : {
            "type" : "integer",
            "format" : "int64"
          },
          "contactPersonName" : {
            "type" : "string"
          },
          "escort" : {
            "type" : "string"
          },
          "comment" : {
            "type" : "string"
          },
          "transportType" : {
            "type" : "string"
          },
          "audit" : {
            "$ref" : "#/components/schemas/NomisAudit",
            "description" : "Audit data associated with the records"
          }
        },
        "required" : [ "audit", "eventId", "eventStatus", "returnTime", "startTime" ]
      },
      "CreateTapAuthorisationRequest" : {
        "type" : "object",
        "properties" : {
          "submittedAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "absenceTypeCode" : {
            "type" : "string"
          },
          "absenceSubTypeCode" : {
            "type" : "string"
          },
          "absenceReasonCode" : {
            "type" : "string"
          },
          "occurrences" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/CreateTapOccurrenceRequest"
            }
          },
          "statusCode" : {
            "type" : "string",
            "enum" : [ "PENDING", "APPROVED", "WITHDRAWN", "DENIED" ]
          },
          "notes" : {
            "type" : "string"
          },
          "repeat" : {
            "type" : "boolean"
          },
          "fromDate" : {
            "type" : "string",
            "format" : "date"
          },
          "toDate" : {
            "type" : "string",
            "format" : "date"
          }
        },
        "required" : [ "absenceTypeCode", "fromDate", "occurrences", "repeat", "statusCode", "submittedAt", "toDate" ]
      },
      "CreateTapOccurrenceRequest" : {
        "type" : "object",
        "properties" : {
          "releaseAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "returnBy" : {
            "type" : "string",
            "format" : "date-time"
          },
          "accompaniedByCode" : {
            "type" : "string"
          },
          "transportCode" : {
            "type" : "string"
          },
          "locationTypeCode" : {
            "type" : "string"
          },
          "locationId" : {
            "type" : "string"
          },
          "notes" : {
            "type" : "string"
          }
        },
        "required" : [ "accompaniedByCode", "locationId", "locationTypeCode", "releaseAt", "returnBy", "transportCode" ]
      },
      "ReferenceId" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          }
        },
        "required" : [ "id" ]
      },
      "AtAndBy" : {
        "type" : "object",
        "properties" : {
          "at" : {
            "type" : "string",
            "format" : "date-time"
          },
          "by" : {
            "type" : "string"
          },
          "displayName" : {
            "type" : "string"
          }
        },
        "required" : [ "at", "by", "displayName" ]
      },
      "Authorisation" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "person" : {
            "$ref" : "#/components/schemas/Person"
          },
          "status" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceSubType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReason" : {
            "$ref" : "#/components/schemas/CodedDescription"
          }
        },
        "required" : [ "id", "person", "status" ]
      },
      "CodedDescription" : {
        "type" : "object",
        "properties" : {
          "code" : {
            "type" : "string"
          },
          "description" : {
            "type" : "string"
          },
          "hintText" : {
            "type" : "string"
          }
        },
        "required" : [ "code", "description" ]
      },
      "ContactInformation" : {
        "type" : "object",
        "properties" : {
          "names" : {
            "type" : "array",
            "items" : {
              "type" : "string"
            },
            "uniqueItems" : true
          },
          "phones" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Phone"
            }
          },
          "emails" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/EmailAddress"
            }
          },
          "webAddresses" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/WebAddress"
            }
          }
        },
        "required" : [ "emails", "names", "phones", "webAddresses" ]
      },
      "EmailAddress" : {
        "type" : "object",
        "properties" : {
          "email" : {
            "type" : "string"
          },
          "isAddressSpecific" : {
            "type" : "boolean"
          }
        },
        "required" : [ "email", "isAddressSpecific" ]
      },
      "Location" : {
        "type" : "object",
        "properties" : {
          "type" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "description" : {
            "type" : "string"
          },
          "isActive" : {
            "type" : "boolean"
          },
          "address" : {
            "$ref" : "#/components/schemas/Address"
          },
          "contactInformation" : {
            "$ref" : "#/components/schemas/ContactInformation"
          },
          "id" : {
            "type" : "string"
          }
        },
        "required" : [ "description", "isActive", "type" ]
      },
      "Person" : {
        "type" : "object",
        "properties" : {
          "personIdentifier" : {
            "type" : "string"
          },
          "firstName" : {
            "type" : "string"
          },
          "lastName" : {
            "type" : "string"
          },
          "dateOfBirth" : {
            "type" : "string",
            "format" : "date"
          },
          "cellLocation" : {
            "type" : "string"
          }
        },
        "required" : [ "dateOfBirth", "firstName", "lastName", "personIdentifier" ]
      },
      "Phone" : {
        "type" : "object",
        "properties" : {
          "type" : {
            "type" : "string"
          },
          "number" : {
            "type" : "string"
          },
          "extension" : {
            "type" : "string"
          },
          "isAddressSpecific" : {
            "type" : "boolean"
          }
        },
        "required" : [ "isAddressSpecific", "number", "type" ]
      },
      "TapOccurrence" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "authorisation" : {
            "$ref" : "#/components/schemas/Authorisation"
          },
          "releaseAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "returnBy" : {
            "type" : "string",
            "format" : "date-time"
          },
          "location" : {
            "$ref" : "#/components/schemas/Location"
          },
          "accompaniedBy" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "transport" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "added" : {
            "$ref" : "#/components/schemas/AtAndBy"
          },
          "cancelled" : {
            "$ref" : "#/components/schemas/AtAndBy"
          }
        },
        "required" : [ "accompaniedBy", "added", "authorisation", "id", "location", "releaseAt", "returnBy", "transport" ]
      },
      "WebAddress" : {
        "type" : "object",
        "properties" : {
          "web" : {
            "type" : "string"
          },
          "isAddressSpecific" : {
            "type" : "boolean"
          }
        },
        "required" : [ "isAddressSpecific", "web" ]
      },
      "Occurrence" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "releaseAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "returnBy" : {
            "type" : "string",
            "format" : "date-time"
          },
          "location" : {
            "$ref" : "#/components/schemas/Location"
          },
          "accompaniedBy" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "transport" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "isCancelled" : {
            "type" : "boolean"
          }
        },
        "required" : [ "accompaniedBy", "id", "isCancelled", "location", "releaseAt", "returnBy", "transport" ]
      },
      "TapAuthorisation" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "person" : {
            "$ref" : "#/components/schemas/Person"
          },
          "status" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceSubType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReason" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "repeat" : {
            "type" : "boolean"
          },
          "fromDate" : {
            "type" : "string",
            "format" : "date"
          },
          "toDate" : {
            "type" : "string",
            "format" : "date"
          },
          "occurrences" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Occurrence"
            }
          },
          "submitted" : {
            "$ref" : "#/components/schemas/AtAndBy"
          },
          "approved" : {
            "$ref" : "#/components/schemas/AtAndBy"
          }
        },
        "required" : [ "fromDate", "id", "occurrences", "person", "repeat", "status", "submitted", "toDate" ]
      },
      "TapOccurrenceSearchRequest" : {
        "type" : "object",
        "properties" : {
          "prisonCode" : {
            "type" : "string",
            "minLength" : 1
          },
          "fromDate" : {
            "type" : "string",
            "format" : "date"
          },
          "toDate" : {
            "type" : "string",
            "format" : "date"
          },
          "query" : {
            "type" : "string"
          },
          "page" : {
            "type" : "integer",
            "format" : "int32",
            "minimum" : 1
          },
          "size" : {
            "type" : "integer",
            "format" : "int32",
            "minimum" : 1
          },
          "sort" : {
            "type" : "string"
          }
        },
        "required" : [ "fromDate", "page", "prisonCode", "size", "sort", "toDate" ]
      },
      "PageMetadata" : {
        "type" : "object",
        "properties" : {
          "totalElements" : {
            "type" : "integer",
            "format" : "int64"
          }
        },
        "required" : [ "totalElements" ]
      },
      "TapOccurrenceAuthorisation" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "person" : {
            "$ref" : "#/components/schemas/Person"
          },
          "status" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceSubType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReason" : {
            "$ref" : "#/components/schemas/CodedDescription"
          }
        },
        "required" : [ "id", "person", "status" ]
      },
      "TapOccurrenceResult" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "authorisation" : {
            "$ref" : "#/components/schemas/TapOccurrenceAuthorisation"
          },
          "releaseAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "returnBy" : {
            "type" : "string",
            "format" : "date-time"
          },
          "accompaniedBy" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "transport" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "location" : {
            "$ref" : "#/components/schemas/Location"
          },
          "isCancelled" : {
            "type" : "boolean"
          }
        },
        "required" : [ "accompaniedBy", "authorisation", "id", "isCancelled", "location", "releaseAt", "returnBy", "transport" ]
      },
      "TapOccurrenceSearchResponse" : {
        "type" : "object",
        "properties" : {
          "content" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/TapOccurrenceResult"
            }
          },
          "metadata" : {
            "$ref" : "#/components/schemas/PageMetadata"
          }
        },
        "required" : [ "content", "metadata" ]
      },
      "TapAuthorisationSearchRequest" : {
        "type" : "object",
        "properties" : {
          "prisonCode" : {
            "type" : "string",
            "minLength" : 1
          },
          "fromDate" : {
            "type" : "string",
            "format" : "date"
          },
          "toDate" : {
            "type" : "string",
            "format" : "date"
          },
          "status" : {
            "type" : "array",
            "items" : {
              "type" : "string",
              "enum" : [ "PENDING", "APPROVED", "WITHDRAWN", "DENIED" ]
            },
            "uniqueItems" : true
          },
          "query" : {
            "type" : "string"
          },
          "page" : {
            "type" : "integer",
            "format" : "int32",
            "minimum" : 1
          },
          "size" : {
            "type" : "integer",
            "format" : "int32",
            "minimum" : 1
          },
          "sort" : {
            "type" : "string"
          }
        },
        "required" : [ "fromDate", "page", "prisonCode", "size", "sort", "status", "toDate" ]
      },
      "TapAuthorisationResult" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "person" : {
            "$ref" : "#/components/schemas/Person"
          },
          "status" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceSubType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReason" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "repeat" : {
            "type" : "boolean"
          },
          "fromDate" : {
            "type" : "string",
            "format" : "date"
          },
          "toDate" : {
            "type" : "string",
            "format" : "date"
          },
          "locations" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Location"
            }
          },
          "occurrenceCount" : {
            "type" : "integer",
            "format" : "int32"
          },
          "submittedAt" : {
            "type" : "string",
            "format" : "date-time"
          }
        },
        "required" : [ "fromDate", "id", "locations", "occurrenceCount", "person", "repeat", "status", "submittedAt", "toDate" ]
      },
      "TapAuthorisationSearchResponse" : {
        "type" : "object",
        "properties" : {
          "content" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/TapAuthorisationResult"
            }
          },
          "metadata" : {
            "$ref" : "#/components/schemas/PageMetadata"
          }
        },
        "required" : [ "content", "metadata" ]
      },
      "LocationSearchRequest" : {
        "type" : "object",
        "properties" : {
          "query" : {
            "type" : "string",
            "minLength" : 1
          },
          "page" : {
            "type" : "integer",
            "format" : "int32",
            "minimum" : 1
          },
          "size" : {
            "type" : "integer",
            "format" : "int32",
            "minimum" : 1
          },
          "sort" : {
            "type" : "string"
          }
        },
        "required" : [ "page", "query", "size", "sort" ]
      },
      "LocationResult" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string"
          },
          "name" : {
            "type" : "string"
          },
          "premise" : {
            "type" : "string"
          },
          "street" : {
            "type" : "string"
          },
          "area" : {
            "type" : "string"
          },
          "city" : {
            "type" : "string"
          },
          "county" : {
            "type" : "string"
          },
          "country" : {
            "type" : "string"
          },
          "postcode" : {
            "type" : "string"
          }
        },
        "required" : [ "id" ]
      },
      "LocationSearchResponse" : {
        "type" : "object",
        "properties" : {
          "content" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/LocationResult"
            }
          },
          "metadata" : {
            "$ref" : "#/components/schemas/PageMetadata"
          }
        },
        "required" : [ "content", "metadata" ]
      },
      "ReferenceDataResponse" : {
        "type" : "object",
        "properties" : {
          "domain" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "items" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/CodedDescription"
            }
          }
        },
        "required" : [ "domain", "items" ]
      },
      "Configuration" : {
        "type" : "object",
        "properties" : {
          "tapEnabled" : {
            "type" : "boolean"
          },
          "courtMovementsEnabled" : {
            "type" : "boolean"
          },
          "transfersEnabled" : {
            "type" : "boolean"
          },
          "releasesEnabled" : {
            "type" : "boolean"
          }
        },
        "required" : [ "courtMovementsEnabled", "releasesEnabled", "tapEnabled", "transfersEnabled" ]
      },
      "PrisonExternalMovementOverview" : {
        "type" : "object",
        "properties" : {
          "configuration" : {
            "$ref" : "#/components/schemas/Configuration"
          },
          "tapOverview" : {
            "$ref" : "#/components/schemas/TapOverview"
          }
        },
        "required" : [ "configuration", "tapOverview" ]
      },
      "TapOverview" : {
        "type" : "object",
        "properties" : {
          "leavingToday" : {
            "type" : "integer",
            "format" : "int32"
          },
          "returningToday" : {
            "type" : "integer",
            "format" : "int32"
          },
          "leavingNextSevenDays" : {
            "type" : "integer",
            "format" : "int32"
          },
          "approvalsRequired" : {
            "type" : "integer",
            "format" : "int32"
          }
        },
        "required" : [ "approvalsRequired", "leavingNextSevenDays", "leavingToday", "returningToday" ]
      },
      "AbsenceCategorisation" : {
        "type" : "object",
        "properties" : {
          "code" : {
            "type" : "string"
          },
          "description" : {
            "type" : "string"
          },
          "hintText" : {
            "type" : "string"
          },
          "nextDomain" : {
            "type" : "string",
            "enum" : [ "ABSENCE_TYPE", "ABSENCE_SUB_TYPE", "ABSENCE_REASON_CATEGORY", "ABSENCE_REASON", "ACCOMPANIED_BY", "TRANSPORT", "TAP_AUTHORISATION_STATUS", "TAP_OCCURRENCE_STATUS", "LOCATION_TYPE" ]
          }
        },
        "required" : [ "code", "description" ]
      },
      "AbsenceCategorisations" : {
        "type" : "object",
        "properties" : {
          "domain" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "items" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/AbsenceCategorisation"
            }
          }
        },
        "required" : [ "domain", "items" ]
      }
    },
    "securitySchemes" : {
      "bearer-jwt" : {
        "type" : "http",
        "name" : "Authorization",
        "in" : "header",
        "scheme" : "bearer",
        "bearerFormat" : "JWT"
      }
    }
  }
}